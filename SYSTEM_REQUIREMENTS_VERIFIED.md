# ‚úÖ –ü–†–û–í–ï–†–ö–ê –°–ò–°–¢–ï–ú–ù–´–• –¢–†–ï–ë–û–í–ê–ù–ò–ô

**–î–∞—Ç–∞:** 31.10.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø –í–´–ü–û–õ–ù–ï–ù–´**

---

## üéØ **1. –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –î–£–ë–õ–ò–ö–ê–¢–û–í –ë–û–¢–û–í**

### **–ü—Ä–æ–±–ª–µ–º–∞:**
- Systemd service `trading-bot.service` —Å `Restart=always` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–ª –±–æ—Ç–∞
- –ü—Ä–∏ —Ä—É—á–Ω–æ–º –∑–∞–ø—É—Å–∫–µ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –¥—É–±–ª–∏–∫–∞—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

### **–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ Systemd service **–û–°–¢–ê–ù–û–í–õ–ï–ù** –∏ **–û–¢–ö–õ–Æ–ß–ï–ù** (`systemctl stop && disable`)
- ‚úÖ –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ `nohup` (–æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ systemd –æ—Ç–∫–ª—é—á–µ–Ω

---

## üîí **2. MTF –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï (45m + 1h + 4h)**

### **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:**
–ü–æ–∑–∏—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è **–¢–û–õ–¨–ö–û** –ø—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ 45m+1h+4h

### **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
‚úÖ **–§—É–Ω–∫—Ü–∏—è `_mtf_confirm()`** (—Å—Ç—Ä–æ–∫–∏ 1454-1492):
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç **45m + 1h + 4h** –¥–ª—è LONG –∏ SHORT
- –õ–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ
- **–ë–ª–æ–∫–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞–ª** (`signal = None`, `confidence = 0`) –µ—Å–ª–∏ MTF –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ

‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `analyze_symbol_v4()`** (—Å—Ç—Ä–æ–∫–∏ 1494-1497):
```python
if signal and not _mtf_confirm(signal):
    logger.warning(f"üö´ {symbol}: –û–¢–ö–õ–û–ù–ï–ù–û ‚Äî –Ω–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è 45m+1h+4h")
    signal = None
    confidence = 0
```

‚úÖ **–ú–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ —Ç–æ–∂–µ –ø—Ä–æ—Ö–æ–¥—è—Ç MTF** (—Å—Ç—Ä–æ–∫–∏ 1363-1387):
- –î–µ—Ç–µ–∫—Ç–æ—Ä –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç MTF –î–û —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∏–≥–Ω–∞–ª–∞
- –ï—Å–ª–∏ MTF –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ - —Å–∏–≥–Ω–∞–ª –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è

---

## üé≠ **3. –ú–ê–ù–ò–ü–£–õ–Ø–¶–ò–ò –ù–ï –û–ë–•–û–î–Ø–¢ –ü–†–û–í–ï–†–ö–£**

### **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:**
–ú–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç—å MTF –ø—Ä–æ–≤–µ—Ä–∫—É

### **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
‚úÖ **–î–µ—Ç–µ–∫—Ç–æ—Ä –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π** (—Å—Ç—Ä–æ–∫–∏ 1358-1387):
```python
# –ö–†–ò–¢–ò–ß–ù–û: –ú–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ —Ç–æ–∂–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç—å MTF –ø—Ä–æ–≤–µ—Ä–∫—É
if potential_signal == 'buy':
    mtf_ok = (current_45m.get('ema_9', 0) > current_45m.get('ema_21', 0) and
             current_1h.get('ema_9', 0) > current_1h.get('ema_21', 0) and
             current_4h.get('ema_9', 0) > current_4h.get('ema_21', 0))
# ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è 'sell'

if mtf_ok:
    # –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ MTF –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–∏–≥–Ω–∞–ª
    signal = manipulation_signal
else:
    logger.warning(f"üé≠ {symbol}: –î–ï–¢–ï–ö–¢ –ú–ê–ù–ò–ü–£–õ–Ø–¶–ò–ò, –ù–û MTF –ù–ï –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û ‚Üí —Å–∏–≥–Ω–∞–ª –û–¢–ö–õ–û–ù–ï–ù")
```

---

## üìä **4. –ú–ò–ù–ò–ú–ê–õ–¨–ù–ê–Ø –£–í–ï–†–ï–ù–ù–û–°–¢–¨: 55-80% (–ê–î–ê–ü–¢–ò–í–ù–ê–Ø)**

### **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:**
–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 55-80% (–∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è)

### **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
‚úÖ **–ë–∞–∑–æ–≤—ã–π –ø–æ—Ä–æ–≥** (—Å—Ç—Ä–æ–∫–∞ 433):
```python
self.MIN_CONFIDENCE_BASE = 70  # –ë–∞–∑–æ–≤–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
```

‚úÖ **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** (—Å—Ç—Ä–æ–∫–∏ 1042-1071):
- BEARISH + SHORT: 55% (–∞–≥—Ä–µ—Å—Å–∏–≤–Ω–µ–µ)
- BULLISH + LONG: 55% (–∞–≥—Ä–µ—Å—Å–∏–≤–Ω–µ–µ)
- BEARISH + LONG: 60% (–æ—Å—Ç–æ—Ä–æ–∂–Ω–µ–µ)
- BULLISH + SHORT: 60% (–æ—Å—Ç–æ—Ä–æ–∂–Ω–µ–µ)
- NEUTRAL: 70% (–±–∞–∑–æ–≤—ã–π)

‚úÖ **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞** (—Å—Ç—Ä–æ–∫–∞ 1071):
```python
adaptive_min_confidence = max(55, min(80, adaptive_min_confidence))  # ‚úÖ 55-80%
```

‚úÖ **–î–ª—è –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π** (—Å—Ç—Ä–æ–∫–∞ 1382):
```python
adaptive_min_confidence = max(adaptive_params.get('min_confidence', 70) - 15, 55)  # –ú–∏–Ω–∏–º—É–º 55%
```

---

## ‚ö° **5. –ò–ú–ü–£–õ–¨–° –ù–ê 15m/30m**

### **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:**
–ò–º–ø—É–ª—å—Å –Ω–∞ 15m/30m –≤ –Ω—É–∂–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏

### **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `_has_min_potential()`** (—Å—Ç—Ä–æ–∫–∏ 1515-1525):
```python
# –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–ø—É–ª—å—Å–∞ –Ω–∞ 15m/30m –∫–∞–∫ —Ç–∞–π–º–∏–Ω–≥-—Ç—Ä–∏–≥–≥–µ—Ä—ã
ema_up_15 = current_15m.get('ema_9', 0) > current_15m.get('ema_21', 0)
ema_up_30 = current_30m.get('ema_9', 0) > current_30m.get('ema_21', 0)
ema_dn_15 = current_15m.get('ema_9', 0) < current_15m.get('ema_21', 0)
ema_dn_30 = current_30m.get('ema_9', 0) < current_30m.get('ema_21', 0)

if direction == 'buy' and not (ema_up_15 and ema_up_30):
    logger.info(f"üö´ {symbol}: –û—Ç–∫–ª–æ–Ω–µ–Ω–æ | –ù–µ—Ç –∏–º–ø—É–ª—å—Å–∞ –Ω–∞ 15m/30m –¥–ª—è LONG")
    return False
if direction == 'sell' and not (ema_dn_15 and ema_dn_30):
    logger.info(f"üö´ {symbol}: –û—Ç–∫–ª–æ–Ω–µ–Ω–æ | –ù–µ—Ç –∏–º–ø—É–ª—å—Å–∞ –Ω–∞ 15m/30m –¥–ª—è SHORT")
    return False
```

‚úÖ **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º** (—Å—Ç—Ä–æ–∫–∞ 1531):
```python
if signal and confidence >= adaptive_min_confidence and _has_min_potential(signal):
    # –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é
```

---

## üí∞ **6. –ì–ê–†–ê–ù–¢–ò–Ø –ó–ê–†–ê–ë–û–¢–ö–ê**

### **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:**
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∏–Ω–∏–º—É–º: **+$1** –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ **+4%**
- –¢–µ–∫—É—â–∏–π TP: **+1.15%** (—Å—Ç–∞—Ä—Ç–æ–≤—ã–π)
- –ú–æ–Ω–∏—Ç–æ—Ä —Ç—Ä–µ–π–ª–∏—Ç –¥–æ **+4-5%**

### **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
‚úÖ **–°—Ç–∞—Ä—Ç–æ–≤—ã–π TP** (—Å—Ç—Ä–æ–∫–∞ 2451):
```python
tp_percent = 1.15  # –°—Ç–∞—Ä—Ç–æ–≤—ã–π TP +1.15%
```

‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä —Ç—Ä–µ–π–ª–∏–Ω–≥ TP** (`monitor_trailing_tp_universal.py`):
- BASE_TARGET = 1.0% (—Å—Ç–∞—Ä—Ç)
- GUARANTEED_TARGET = 4.0% (**+$1 –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ**)
- STEP = 0.5% (—à–∞–≥ —Ç—Ä–µ–π–ª–∏–Ω–≥–∞)
- MAX_TARGET = 5.0% (–º–∞–∫—Å–∏–º—É–º)

‚úÖ **–õ–æ–≥–∏–∫–∞ —Ç—Ä–µ–π–ª–∏–Ω–≥–∞:**
- –°—Ç–∞—Ä—Ç: +1.15% (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –±–æ—Ç–æ–º)
- –ú–æ–Ω–∏—Ç–æ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç: +1.5% ‚Üí +2% ‚Üí +2.5% ‚Üí +3% ‚Üí +3.5% ‚Üí **+4%** ($1) ‚Üí +4.5% ‚Üí **+5%** ($1.25)

---

## ‚úÖ **–ò–¢–û–ì–û–í–ê–Ø –ü–†–û–í–ï–†–ö–ê:**

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-----------|--------|------------|
| –î—É–±–ª–∏–∫–∞—Ç—ã –±–æ—Ç–æ–≤ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã | ‚úÖ | Systemd service –æ—Ç–∫–ª—é—á–µ–Ω |
| MTF 45m+1h+4h –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ | ‚úÖ | –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `_mtf_confirm()` |
| –ú–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç MTF | ‚úÖ | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π —Å–∏–≥–Ω–∞–ª–∞ |
| –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –±–µ–∑ MTF | ‚úÖ | `signal = None`, `confidence = 0` |
| –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å 55-80% | ‚úÖ | –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ |
| –ò–º–ø—É–ª—å—Å 15m/30m | ‚úÖ | –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `_has_min_potential()` |
| TP —Å—Ç–∞—Ä—Ç–æ–≤—ã–π 1.15% | ‚úÖ | –û–±–Ω–æ–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ |
| –ì–∞—Ä–∞–Ω—Ç–∏—è +$1 –ø—Ä–∏ +4% | ‚úÖ | –ú–æ–Ω–∏—Ç–æ—Ä —Ç—Ä–µ–π–ª–∏—Ç –¥–æ +4% |

---

**‚úÖ –í–°–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø –í–´–ü–û–õ–ù–ï–ù–´ –ò –ü–†–û–í–ï–†–ï–ù–´**








