#!/bin/bash
# üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∞–Ω–∞–ª–∏–∑–∞ –±–æ—Ç–∞ - –¥–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

SERVER_IP="213.163.199.116"
SSH_KEY="$HOME/.ssh/upcloud_trading_bot"

echo "üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ê–ù–ê–õ–ò–ó–ê –ë–û–¢–ê"
echo "=================================="
echo ""

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
execute_remote() {
    ssh -i "$SSH_KEY" -o ConnectTimeout=5 root@"$SERVER_IP" "$1" 2>/dev/null
}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –±–æ—Ç–∞
echo "1Ô∏è‚É£ –°–¢–ê–¢–£–° –ë–û–¢–ê:"
echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
STATUS=$(execute_remote "systemctl is-active trading-bot 2>/dev/null || echo '–Ω–µ–∞–∫—Ç–∏–≤–µ–Ω'")
echo "   –°—Ç–∞—Ç—É—Å: $STATUS"
execute_remote "systemctl status trading-bot --no-pager | head -5"
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
echo "2Ô∏è‚É£ –ü–†–û–¶–ï–°–°–´:"
echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
execute_remote "ps aux | grep -E 'super_bot_v4_mtf\.py' | grep -v grep | head -2"
echo ""

# –ü–æ–∏—Å–∫ –ª–æ–≥-—Ñ–∞–π–ª–æ–≤
echo "3Ô∏è‚É£ –ü–û–ò–°–ö –õ–û–ì-–§–ê–ô–õ–û–í:"
echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
LOG_FILES=$(execute_remote "ls -lh /opt/bot/super_bot_v4_mtf.log /opt/bot/logs/system/bot.log 2>/dev/null | awk '{print \$9, \$5, \$6, \$7, \$8}'")
if [ -z "$LOG_FILES" ]; then
    echo "   ‚ö†Ô∏è –õ–æ–≥-—Ñ–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
else
    echo "$LOG_FILES"
fi
echo ""

# –ü–æ–¥—Å—á–µ—Ç —Ü–∏–∫–ª–æ–≤ –∞–Ω–∞–ª–∏–∑–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞
echo "4Ô∏è‚É£ –¶–ò–ö–õ–´ –ê–ù–ê–õ–ò–ó–ê (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞):"
echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
CYCLES=$(execute_remote "grep -E 'V4\.0: –¶–∏–∫–ª –∑–∞–≤–µ—Ä—à–µ–Ω|üîç V4\.0: –ù–∞—á–∏–Ω–∞–µ–º –∞–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞' /opt/bot/super_bot_v4_mtf.log /opt/bot/logs/system/bot.log 2>/dev/null | tail -100 | wc -l")
echo "   –ù–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π –æ —Ü–∏–∫–ª–∞—Ö: $CYCLES"
echo ""

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ü–∏–∫–ª—ã —Å –¥–µ—Ç–∞–ª—è–º–∏
echo "5Ô∏è‚É£ –ü–û–°–õ–ï–î–ù–ò–ï 10 –¶–ò–ö–õ–û–í –ê–ù–ê–õ–ò–ó–ê:"
echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
execute_remote "grep -E 'V4\.0: –¶–∏–∫–ª –∑–∞–≤–µ—Ä—à–µ–Ω' /opt/bot/super_bot_v4_mtf.log /opt/bot/logs/system/bot.log 2>/dev/null | tail -10"
echo ""

# –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä—ã–Ω–∫–∞
echo "6Ô∏è‚É£ –ù–ê–ü–†–ê–í–õ–ï–ù–ò–ï –†–´–ù–ö–ê (–ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏):"
echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
execute_remote "grep -E 'BULLISH|BEARISH|NEUTRAL|–†—ã–Ω–æ–∫:|market_condition|–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º.*—Å–∏–º–≤–æ–ª–æ–≤ –≤ —É—Å–ª–æ–≤–∏—è—Ö' /opt/bot/super_bot_v4_mtf.log /opt/bot/logs/system/bot.log 2>/dev/null | tail -15"
echo ""

# –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã–µ –º–æ–Ω–µ—Ç—ã
echo "7Ô∏è‚É£ –ú–û–ù–ï–¢–´ –í –ê–ù–ê–õ–ò–ó–ï (–ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏):"
echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
execute_remote "grep -E '–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º.*—Å–∏–º–≤–æ–ª–æ–≤|smart_symbol_selection|—Å–∏–º–≤–æ–ª.*–∞–Ω–∞–ª–∏–∑' /opt/bot/super_bot_v4_mtf.log /opt/bot/logs/system/bot.log 2>/dev/null | tail -10"
echo ""

# –ú–æ–Ω–µ—Ç—ã –±–ª–∏–∑–∫–∏–µ –∫ –æ—Ç–∫—Ä—ã—Ç–∏—é (—Å–∏–≥–Ω–∞–ª—ã)
echo "8Ô∏è‚É£ –°–ò–ì–ù–ê–õ–´ –ò –ú–û–ù–ï–¢–´ –ë–õ–ò–ó–ö–ò–ï –ö –û–¢–ö–†–´–¢–ò–Æ:"
echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
execute_remote "grep -E 'V4\.0 –°–ò–ì–ù–ê–õ|üéØ.*–°–ò–ì–ù–ê–õ|—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å.*%|confidence.*%' /opt/bot/super_bot_v4_mtf.log /opt/bot/logs/system/bot.log 2>/dev/null | tail -20"
echo ""

# –ü—Ä–∏—á–∏–Ω—ã –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤
echo "9Ô∏è‚É£ –ü–†–ò–ß–ò–ù–´ –û–¢–ö–õ–û–ù–ï–ù–ò–Ø –°–ò–ì–ù–ê–õ–û–í:"
echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
execute_remote "grep -E '–ü—Ä–æ–ø—É—â–µ–Ω|–õ–ò–ú–ò–¢ –î–û–°–¢–ò–ì–ù–£–¢|–ù–ï–î–û–°–¢–ê–¢–û–ß–ù–û –ë–ê–õ–ê–ù–°–ê|—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å.*–Ω–∏–∑–∫–∞—è|MIN_CONFIDENCE|–æ—Ç–∫–ª–æ–Ω–µ–Ω' /opt/bot/super_bot_v4_mtf.log /opt/bot/logs/system/bot.log 2>/dev/null | tail -15"
echo ""

# –û—à–∏–±–∫–∏
echo "üîü –û–®–ò–ë–ö–ò –ò –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–Ø:"
echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
execute_remote "grep -iE 'ERROR|‚ùå|WARNING|‚ö†Ô∏è|Exception' /opt/bot/super_bot_v4_mtf.log /opt/bot/logs/system/bot.log 2>/dev/null | tail -10"
echo ""

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ª–æ–≥–∞
echo "1Ô∏è‚É£1Ô∏è‚É£ –ü–û–°–õ–ï–î–ù–ò–ï 30 –°–¢–†–û–ö –õ–û–ì–ê:"
echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
execute_remote "tail -30 /opt/bot/super_bot_v4_mtf.log 2>/dev/null || tail -30 /opt/bot/logs/system/bot.log 2>/dev/null || echo '   –õ–æ–≥–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã'"
echo ""

echo "=================================="
echo "‚úÖ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê"
echo ""
echo "üìã –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:"
echo "   ssh -i $SSH_KEY root@$SERVER_IP 'tail -f /opt/bot/super_bot_v4_mtf.log'"
echo ""

